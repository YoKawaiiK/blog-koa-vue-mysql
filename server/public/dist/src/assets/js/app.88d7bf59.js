(function(t){function e(e){for(var n,i,o=e[0],c=e[1],u=e[2],p=0,d=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(d.length)d.shift()();return r.push.apply(r,u||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],n=!0,o=1;o<s.length;o++){var c=s[o];0!==a[c]&&(n=!1)}n&&(r.splice(e--,1),t=i(i.s=s[0]))}return t}var n={},a={app:0},r=[];function i(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=n,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},2154:function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("component-header"),s("router-view")],1)},r=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hero is-desktop is-medium is-light"},[s("nav",{staticClass:"navbar"},[s("div",{staticClass:"container"},[t._m(0),s("div",{staticClass:"navbar-menu",attrs:{id:"navbarMenuHeroA"}},[s("div",{staticClass:"navbar-end"},[s("router-link",{staticClass:"navbar-item",attrs:{to:{name:"home"}}},[t._v("Главная")]),s("router-link",{directives:[{name:"show",rawName:"v-show",value:0!=t.getAuth,expression:"getAuth != false"}],staticClass:"navbar-item",attrs:{to:{name:"posts",params:{user_id:t.getUser_id,pagination:1}}}},[t._v("Записи")]),0==t.getAuth?s("router-link",{staticClass:"navbar-item",attrs:{to:{name:"login"}}},[t._v("Войти")]):s("a",{staticClass:"navbar-item",on:{click:function(e){return t.actionExit()}}},[t._v(" Выйти")])],1)])])])])},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"navbar-brand"},[s("a",{staticClass:"navbar-item"},[s("h1",{staticClass:"title"},[t._v("Блог")])]),s("span",{staticClass:"navbar-burger burger",attrs:{"data-target":"navbarMenuHeroA"}},[s("span"),s("span"),s("span")])])}],c=s("5530"),u=s("2f62"),l={name:"componentHeader",computed:Object(c["a"])({},Object(u["c"])("cookiesState",["getAuth","getUser_id"])),methods:Object(c["a"])({},Object(u["b"])("exit",["actionExit"]))},p=l,d=s("2877"),m=Object(d["a"])(p,i,o,!1,null,"5df5241c",null),g=m.exports,f={watch:{$route:function(t){document.title=t.meta.title||"Main"}},created:function(){document.title=this.$route.meta.title||"Main"},components:{"component-header":g}},h=f,v=Object(d["a"])(h,a,r,!1,null,null,null),w=v.exports,b=(s("45fc"),s("8c4f")),_=(s("96cf"),s("1da1")),x={namespaced:!0,state:{},getters:{},mutations:{},actions:{actionlogin:function(t,e){return Object(_["a"])(regeneratorRuntime.mark((function s(){var a,r,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t.dispatch,r=t.rootGetters,s.next=3,n["a"].axios.post("/api/login",e);case 3:if(i=s.sent,1!=i.data.accessAllowed){s.next=13;break}return s.next=7,a("cookiesState/actionLogin",null,{root:!0});case 7:return s.next=9,xt.push({name:"posts",params:{pagination:1,user_id:r["cookiesState/getUser_id"]}});case 9:return s.next=11,a("message/accessAllowed",{},{root:!0});case 11:s.next=14;break;case 13:1==i.data.accessDenied?a("message/accessDenied",{},{root:!0}):1==i.data.loginNotFound?a("message/emailNotFound",{},{root:!0}):a("message/error",{},{root:!0});case 14:case"end":return s.stop()}}),s)})))()}}},C={namespaced:!0,state:{},getters:{},mutations:{},actions:{actionSignin:function(t,e){return Object(_["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:a=t.dispatch,console.log(e),e.password.email<7||e.password.length<7||e.doublePassword.length<7?a("message/shortPassword",{},{root:!0}):e.password.email>40||e.password.length>40||e.doublePassword.length>40?a("message/dataSigninTooLong",{},{root:!0}):e.password!=e.doublePassword?a("message/passwordNotEquivalent",{},{root:!0}):n["a"].axios.post("/api/signin",e).then((function(t){1==t.data.errorDB?a("message/errorDB",{},{root:!0}):1==t.data.accessSignin?a("message/accessSignin",{},{root:!0}):1==t.data.doubleSignin?a("message/doubleSignin",{},{root:!0}):a("message/error",{},{root:!0})}));case 3:case"end":return s.stop()}}),s)})))()}}},P=s("2c4e"),k={namespaced:!0,mutations:{snackbar:function(t,e){var s=e.message,n=e.type;P["a"].open({message:s,type:n})}},actions:{accessAllowed:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:P["a"].open({message:"Вход осуществлен.",type:"is-success"});case 1:case"end":return t.stop()}}),t)})))()},accessDenied:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:P["a"].open({message:"В доступе отказано, введен неверный пароль или логин.",type:"is-danger"});case 1:case"end":return t.stop()}}),t)})))()},loginNotFound:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:P["a"].open({message:"Такая почта или логин не найдены.",type:"is-danger"});case 1:case"end":return t.stop()}}),t)})))()},sessionEnded:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:P["a"].open({message:"Сессия завершена, повторите вход.",type:"is-warning"});case 1:case"end":return t.stop()}}),t)})))()},error:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:P["a"].open({message:"Неизвестная ошибка.",type:"is-warning"});case 1:case"end":return t.stop()}}),t)})))()},accessSignin:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:P["a"].open({message:"Вы зарегистрированы",type:"is-success"});case 1:case"end":return t.stop()}}),t)})))()},doubleSignin:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:P["a"].open({message:"Такой логин или email уже зарегистрированы",type:"is-warning"});case 1:case"end":return t.stop()}}),t)})))()},passwordNotEquivalent:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:P["a"].open({message:"Пароль в обоих полях должен быть одинаковым.",type:"is-warning"});case 1:case"end":return t.stop()}}),t)})))()},shortPassword:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:P["a"].open({message:"Длина пароля должна быть не меньше 8 символов.",type:"is-warning"});case 1:case"end":return t.stop()}}),t)})))()},errorDB:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:P["a"].open({message:"Ошибка сервера БД",type:"is-warning"});case 1:case"end":return t.stop()}}),t)})))()},dataSigninTooLong:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:P["a"].open({message:"Данные для регистрации должны быть меньше 40 символов.",type:"is-warning"});case 1:case"end":return t.stop()}}),t)})))()},exit:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:P["a"].open({message:"Вы вышли.",type:"is-success"});case 1:case"end":return t.stop()}}),t)})))()},errorPosts:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:P["a"].open({message:"Ошибка получения постов",type:"is-danger"});case 1:case"end":return t.stop()}}),t)})))()},postDeletedError:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:P["a"].open({message:"Ошибка удаления поста.",type:"is-danger"});case 1:case"end":return t.stop()}}),t)})))()},postDeleted:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:P["a"].open({message:"Пост удален.",type:"is-success"});case 1:case"end":return t.stop()}}),t)})))()},errorInsertPost:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:P["a"].open({message:"Ошибка добавления поста.",type:"is-danger"});case 1:case"end":return t.stop()}}),t)})))()},insertPost:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:P["a"].open({message:"Пост добавлен",type:"is-success"});case 1:case"end":return t.stop()}}),t)})))()},updateLengthError:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:P["a"].open({message:"Длина сообщения должна быть больше 5 и меньше 1000 символов.",type:"is-warning"});case 1:case"end":return t.stop()}}),t)})))()},errorUpdate:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:P["a"].open({message:"Возникла ошибка при обновлении.",type:"is-danger"});case 1:case"end":return t.stop()}}),t)})))()},postUpdated:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:P["a"].open({message:"Пост обновлен.",type:"is-success"});case 1:case"end":return t.stop()}}),t)})))()},errorParse:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:P["a"].open({message:"Введены данные, содержащие запрещенные символы или SQL-инъекции.",type:"is-success"});case 1:case"end":return t.stop()}}),t)})))()}}},j=(s("d3b7"),{namespaced:!0,actions:{actionCheckToken:function(t,e){return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,s){n["a"].axios.put("/api/signin/verification/".concat(e)).then((function(e){e?t(e):s({error:!0})}))})));case 1:case"end":return t.stop()}}),t)})))()}}}),O={namespaced:!0,state:{auth:!1,user_id:null},getters:{getAuth:function(t){return t.auth},getUser_id:function(t){return t.user_id}},actions:{actionLogin:function(t){return Object(_["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=t.state,0==s.auth&&(s.auth=!0,s.user_id=n["a"].prototype.$cookie.get("user_id"));case 2:case"end":return e.stop()}}),e)})))()},clear:function(t){return Object(_["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=t.state,s.auth=!1;case 2:case"end":return e.stop()}}),e)})))()}}},y={namespaced:!0,actions:{actionExit:function(t){var e=t.dispatch;n["a"].axios.get("/api/exit").then((function(t){1!=t.data.exit?e("message/error",{},{root:!0}):(e("cookiesState/clear",{},{root:!0}),e("message/exit",{},{root:!0}),xt.push({name:"login"}))}))}}},R=(s("99af"),s("4160"),s("a434"),s("159b"),{namespaced:!0,state:{posts:[],totalPosts:null,userLogin:""},getters:{getPosts:function(t){return t.posts},getUserLogin:function(t){return t.userLogin},getTotalPosts:function(t){return t.totalPosts}},mutations:{postDelete:function(t,e){t.posts.forEach((function(s,n,a){a[n].post_id==e&&t.posts.splice(n,1)})),t.totalPosts--},postInsert:function(t,e){t.posts.unshift(e)},totalPosts:function(t){t.totalPosts++},postUpdate:function(t,e){t.posts.forEach((function(s,n,a){a[n].post_id==e.post_id&&(t.posts[n].message=e.message)}))}},actions:{actionGetPosts:function(t,e){return Object(_["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:a=t.state,r=t.dispatch,n["a"].axios.put("/api/posts/user/".concat(e.user_id,"/pagination/").concat(e.pagination)).then((function(t){t.data.errorPosts?r("message/errorPosts",null,{root:!0}):(null==a.totalPosts&&(a.totalPosts=t.data.totalPosts),a.posts=t.data.posts,a.userLogin=t.data.userLogin)}));case 2:case"end":return s.stop()}}),s)})))()},actionPostDelete:function(t,e){return Object(_["a"])(regeneratorRuntime.mark((function s(){var a,r,i,o,c;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t.commit,r=t.dispatch,i=t.getters,s.next=3,n["a"].axios.post("/api/delete",{post_id:e});case 3:if(o=s.sent,!o.data.postDeletedError){s.next=9;break}return s.next=7,r("message/postDeletedError",null,{root:!0});case 7:s.next=23;break;case 9:return s.next=11,n["a"].axios.post("/api/post",{post_id:i.getPosts[0].post_id});case 11:if(c=s.sent,!c.data.error){s.next=16;break}return s.next=15,r("message/postDeletedError",null,{root:!0});case 15:return s.abrupt("return",!1);case 16:return s.next=18,a("postDelete",e);case 18:if(!c.data.post_id){s.next=21;break}return s.next=21,a("postInsert",c.data);case 21:return s.next=23,r("message/postDeleted",null,{root:!0});case 23:case"end":return s.stop()}}),s)})))()},actionPostInsert:function(t,e){return Object(_["a"])(regeneratorRuntime.mark((function s(){var a,r,i,o,c;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t.commit,r=t.dispatch,i=t.getters,s.next=3,n["a"].axios.post("/api/insert",{message:e.message});case 3:if(o=s.sent,!o.data.post_id){s.next=11;break}return 1==e.pagination&&(9==i.getPosts.length&&(c=i.getPosts[i.getPosts.length-1].post_id,a("postDelete",c)),a("postInsert",o.data)),a("totalPosts"),s.next=9,r("message/insertPost",null,{root:!0});case 9:s.next=18;break;case 11:if(!o.data.error){s.next=16;break}return s.next=14,r("message/postDeleted",null,{root:!0});case 14:s.next=18;break;case 16:return s.next=18,r("message/error",null,{root:!0});case 18:case"end":return s.stop()}}),s)})))()},actionPostUpdate:function(t,e){return Object(_["a"])(regeneratorRuntime.mark((function s(){var a,r,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t.dispatch,r=t.commit,s.next=3,n["a"].axios.patch("/api/update",e);case 3:i=s.sent,i.data.postUpdated?r("postUpdate",e):i.data.updateLengthError?a("message/updateLengthError",null,{root:!0}):i.data.errorParse?a("message/errorParse",null,{root:!0}):a("message/errorUpdate",null,{root:!0});case 5:case"end":return s.stop()}}),s)})))()}}});n["a"].use(u["a"]);var $=new u["a"].Store({modules:{message:k,login:x,signin:C,verification:j,cookiesState:O,exit:y,posts:R}}),E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[s("div",{staticClass:"notification is-info is-light full-height-width is-flex is-justify-content is-align-items"},[s("div",{staticClass:"is-inline-block has-text-centered"},[s("h2",{staticClass:"title is-1"},[t._v(" Домашний проект блога ")]),s("button",{staticClass:"button",on:{click:function(e){return t.$router.push({name:"signin"})}}},[t._v("Зарегистрироваться")]),s("br"),s("br"),s("button",{staticClass:"button",on:{click:function(e){return t.$router.push({name:"login"})}}},[t._v("Войти")])])])])])},S=[],U={name:"home"},D=U,L=(s("ee90"),Object(d["a"])(D,E,S,!1,null,null,null)),M=L.exports,N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"outer-form"},[s("div",{staticClass:"card form"},[s("div",{staticClass:"card-content"},[t._m(0),s("div",{staticClass:"field"},[s("label",{staticClass:"label",attrs:{for:"login"}},[t._v("Логин или e-mail")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],staticClass:"input is-primary",attrs:{id:"login",type:"text"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}})])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label",attrs:{for:"password"}},[t._v("Пароль")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input is-primary",attrs:{id:"password",type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),s("div",{staticClass:"field"},[s("button",{staticClass:"button is-primary",on:{click:function(e){return t.actionlogin({login:t.login,password:t.password})}}},[t._v("Войти")])]),s("div",{staticClass:"field"},[s("button",{staticClass:"button",on:{click:function(e){return t.$router.push({name:"signin"})}}},[t._v("Регистрация")])])])])])])},A=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login__item"},[s("h1",{staticClass:"title is-3"},[t._v("Вход в систему")])])}],T={name:"login",data:function(){return{password:"",login:""}},methods:Object(c["a"])({},Object(u["b"])("login",["actionlogin"]))},I=T,F=(s("66c0"),Object(d["a"])(I,N,A,!1,null,null,null)),G=F.exports,H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"outer-form"},[s("div",{staticClass:"card form"},[s("div",{staticClass:"card-content"},[t._m(0),s("div",{staticClass:"field"},[s("label",{staticClass:"label",attrs:{for:"signin"}},[t._v("Логин или e-mail")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input is-primary",attrs:{id:"signin",type:"text"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label",attrs:{for:"password"}},[t._v("Пароль")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input is-primary",attrs:{id:"password",type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label",attrs:{for:"doublePassword"}},[t._v("Пароль")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.doublePassword,expression:"doublePassword"}],staticClass:"input is-primary",attrs:{id:"doublePassword",type:"password"},domProps:{value:t.doublePassword},on:{input:function(e){e.target.composing||(t.doublePassword=e.target.value)}}})])]),s("div",{staticClass:"field"},[s("button",{staticClass:"button is-primary",on:{click:function(e){return t.actionSignin({email:t.email,password:t.password,doublePassword:t.doublePassword})}}},[t._v("Зарегистрироваться")])]),s("div",{staticClass:"field"},[s("button",{staticClass:"button",on:{click:function(e){return t.$router.push({name:"login"})}}},[t._v("Вход")])])])])])])},q=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login__item"},[s("h1",{staticClass:"title is-3"},[t._v("Регистрация")])])}],B={name:"signin",data:function(){return{email:"",password:"",doublePassword:""}},methods:Object(c["a"])({},Object(u["b"])("signin",["actionSignin"]))},z=B,J=Object(d["a"])(z,H,q,!1,null,"3737520a",null),Q=J.exports,K=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},V=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"notification \n    is-warning is-ligth\n    full-height-width is-flex is-justify-content is-align-items"},[s("div",{staticClass:"is-inline-block has-text-centered"},[s("h2",{staticClass:"title is-1"},[t._v("Такой страницы не найдено")])])])])}],W={name:"notFound"},X=W,Y=Object(d["a"])(X,K,V,!1,null,"e824b284",null),Z=Y.exports,tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("section",{staticClass:"hero is-success is-bold is-medium is-bold"},[s("div",{staticClass:"hero-body"},[s("div",{staticClass:"container has-text-centered"},[s("h1",{staticClass:"title"},[t._v("@"+t._s(t.getUserLogin))])])])]),s("div",{staticClass:"container"},[0==t.getTotalPosts?s("div",[s("br"),s("h2",{staticClass:"title is-2 has-text-centered"},[t._v("Здесь ничего нет...")])]):t._l(t.getPosts,(function(e,n){return s("div",{key:n+"-"+e.post_id,staticClass:"posts"},[s("component-post",{attrs:{"user-login":t.getUserLogin,post:e},on:{"child-edit-message":t.editMessage}})],1)})),s("button",{directives:[{name:"show",rawName:"v-show",value:0!=t.getAuth&&0==t.writePost,expression:"getAuth != false && writePost == false"}],staticClass:"button is-success is-outlined is-fixed-button is-large",on:{click:function(e){t.writePost=!t.writePost}}},[s("font-awesome-icon",{attrs:{icon:"plus"}})],1),s("b-modal",{model:{value:t.writePost,callback:function(e){t.writePost=e},expression:"writePost"}},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-content"},[s("div",{staticClass:"content"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"textarea",staticStyle:{resize:"none"},attrs:{id:"",cols:"30",rows:"11"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}})]),s("div",{staticClass:"field is-grouped"},[s("p",{staticClass:"control"},[0==t.update?s("button",{staticClass:"button is-success",on:{click:function(e){return t.postInsert()}}},[t._v("Добавить")]):s("button",{staticClass:"button is-warning",on:{click:function(e){return t.postUpdate()}}},[t._v(" Обновить")])]),s("p",{staticClass:"control"},[s("button",{staticClass:"button",on:{click:function(e){return t.$emit("close")}}},[t._v("Cancel")])])])])])]),s("br"),0!=t.getTotalPosts?s("div",[s("b-pagination",{attrs:{total:t.getTotalPosts,current:t.current,"range-before":"2","range-after":"2",order:"is-centered",size:"is-medium","per-page":10},on:{"update:current":function(e){t.current=e},change:t.pageChange}})],1):t._e(),s("br")],2)])},et=[],st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("article",{staticClass:"articles"},[s("div",{staticClass:"column is-8 is-offset-2"},[s("div",{staticClass:"card article"},[s("div",{staticClass:"card-content"},[s("div",{staticClass:"media"},[s("div",{staticClass:"media-content has-text-centered"},[s("p",{directives:[{name:"show",rawName:"v-show",value:t.getUser_id!=t.$route.params.user_id,expression:"getUser_id != $route.params.user_id"}],staticClass:"title article-title"},[t._v("@"+t._s(t.userLogin))]),s("div",{staticClass:"tags has-addons level-item"},[s("span",{staticClass:"tag"},[t._v(t._s(t.post.date))])])])]),s("div",{staticClass:"content article-body"},[s("p",[t._v(" "+t._s(t.post.message)+" ")])]),s("footer",{directives:[{name:"show",rawName:"v-show",value:t.getUser_id==t.$route.params.user_id&&t.getUser_id,expression:"getUser_id == $route.params.user_id &&\n            getUser_id\n            "}],staticClass:"card-footer"},[s("span",{staticClass:"card-footer-item button",on:{click:function(e){return t.$emit("child-edit-message",{post_id:t.post.post_id,message:t.post.message})}}},[t._v("Изменить")]),s("span",{staticClass:"card-footer-item button",on:{click:function(e){return t.actionPostDelete(t.post.post_id)}}},[t._v("Удалить")])])])])])])])},nt=[],at={name:"post",props:["post","user-login"],computed:Object(c["a"])({},Object(u["c"])("cookiesState",["getUser_id"])),methods:Object(c["a"])({},Object(u["b"])("posts",["actionPostDelete"]))},rt=at,it=Object(d["a"])(rt,st,nt,!1,null,null,null),ot=it.exports,ct=void 0,ut={name:"posts",data:function(){return{writePost:!1,update:!1,post_id:null,message:"",current:1}},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(u["c"])("posts",["getPosts","getUserLogin","getTotalPosts"])),Object(u["c"])("cookiesState",["getAuth","getUser_id"])),{},{pagination:function(){return ct.getTotalPosts/10}}),methods:Object(c["a"])(Object(c["a"])({},Object(u["b"])("posts",["actionGetPosts","actionPostInsert","actionPostUpdate"])),{},{postInsert:function(){this.actionPostInsert({message:this.message,pagination:this.$route.params.pagination}),this.writePost=!1,this.message=""},createDataPagination:function(){return{user_id:this.$route.params.user_id,pagination:this.current,$routeParamLogin:this.$route.params.user_id}},pageChange:function(t){this.current=t,this.$router.push({name:"posts",params:{user:this.getUser_id,pagination:this.current}});var e=this.createDataPagination();this.actionGetPosts(e)},clearModalEdit:function(){this.writePost=!1,this.update=!1,this.message="",this.post_id=""},editMessage:function(t){this.writePost=!0,this.update=!0,this.post_id=t.post_id,this.message=t.message},postUpdate:function(){this.actionPostUpdate({message:this.message,post_id:this.post_id}),this.clearModalEdit()}}),mounted:function(){var t=+this.$route.params.pagination;0==t&&(t=1,this.$router.push({name:"posts",params:{pagination:this.current}})),this.current=t;var e=this.createDataPagination();this.actionGetPosts(e)},components:{"component-post":ot}},lt=ut,pt=(s("7a3e"),Object(d["a"])(lt,tt,et,!1,null,null,null)),dt=pt.exports,mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"notification full-height-width is-flex is-justify-content is-align-items",class:t.classColor},[s("div",{staticClass:"is-inline-block has-text-centered"},[s("h2",{staticClass:"title is-1"},[t._v("Потверждение учетной записи")]),s("h3",{staticClass:"subtitle is-4"},[t._v(t._s(t.textMessage))]),t.emailConfirm?s("button",{staticClass:"button",on:{click:function(e){return t.$router.push({name:"login"})}}},[t._v("Перейти на страницу входа в аккаунт")]):s("button",{staticClass:"button"},[t._v("Перейти на страницу регистрации")])])])])},gt=[],ft={name:"verification",data:function(){return{emailConfirm:!1,classColor:Object,textMessage:String}},methods:{},mounted:function(){var t=this;this.$store.dispatch("verification/actionCheckToken",this.$route.params.token,{root:!0}).then((function(e){e.data.emailConfirm?(t.classColor="is-success is-light",t.textMessage="Email потвержден.",t.emailConfirm=!0):e.data.emailTokenExpired?(t.classColor="is-warning is-light",t.textMessage="Токен истек, повторите регистрацию."):e.data.emailConfirmDouble?(t.classColor="is-info is-light",t.textMessage="Учетная запись уже потверждена.",t.emailConfirm=!0):(t.classColor="is-danger is-light",t.textMessage="Неизвестная ошибка.")}))}},ht=ft,vt=Object(d["a"])(ht,mt,gt,!1,null,null,null),wt=vt.exports;n["a"].use(b["a"]);var bt=[{path:"/",name:"home",component:M,meta:{title:"Home"}},{path:"/login",name:"login",component:G,meta:{title:"Login",guest:!0}},{path:"/signin",name:"signin",component:Q,meta:{title:"Sign In",guest:!0}},{path:"/signin/verification/:token",name:"verification",component:wt,meta:{title:"Email verification",guest:!0}},{path:"/posts/user/:user_id/pagination/:pagination",name:"posts",component:dt,meta:{title:"Posts"}},{path:"/404",name:"notFound",component:Z,meta:{title:"Not found"}},{path:"*",redirect:"/404"}],_t=new b["a"]({mode:"history",base:"/",routes:bt,linkExactActiveClass:"is-active"});_t.beforeEach((function(t,e,s){var a=n["a"].prototype.$cookie.get("auth");a&&$.dispatch("cookiesState/actionLogin",null,{root:!0}),t.matched.some((function(t){return t.meta.guest}))?null==a?s():s({name:"home"}):t.matched.some((function(t){return t.meta.requiresAuth}))&&null==a?s({name:"home"}):s()}));var xt=_t,Ct=s("bc3a"),Pt=s.n(Ct),kt=s("a7fe"),jt=s.n(kt),Ot=s("00e7"),yt=s.n(Ot),Rt=(s("92c6"),s("5abe"),s("61b7")),$t=s("8a22"),Et=s("289d"),St=s("ecee"),Ut=s("c074"),Dt=s("ad3d");St["c"].add(Ut["a"],Ut["b"],Ut["c"]),n["a"].component("font-awesome-icon",Dt["a"]),n["a"].use(jt.a,Pt.a).use(yt.a).use(P["b"]).use(Rt["a"]).use($t["a"]),Et["a"].setOptions({defaultIconPack:"fas",defaultIconComponent:"font-awesome-icon"}),n["a"].config.productionTip=!1,new n["a"]({router:xt,store:$,render:function(t){return t(w)}}).$mount("#app")},"66c0":function(t,e,s){"use strict";var n=s("2154"),a=s.n(n);a.a},"7a3e":function(t,e,s){"use strict";var n=s("e3ff"),a=s.n(n);a.a},e2c1:function(t,e,s){},e3ff:function(t,e,s){},ee90:function(t,e,s){"use strict";var n=s("e2c1"),a=s.n(n);a.a}});
//# sourceMappingURL=app.88d7bf59.js.map